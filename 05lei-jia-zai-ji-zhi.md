```markdown
              |  ---->  连接      <---- |
加载-->验证--->[ 准备---->解析----->初始化]----->使用----->卸载
              |  ---->  连接      <---- |
```



加载，验证，准备，初始化，卸载，5个阶段的顺序是确定的（并发执行，不一定按顺序结束），而解析不确定，有些情况下可以在初始化之后进行。

---

类加载机制

虚拟机严格规定了仅5种初始化立即对类进行初始化的情况。

1.new,getstatic,putstatic或者invokestatic 者4条字节码指令时，如果没有对类进行初始化，则需 要先进行初始化。

在Java中的含义

getstatic 读取一个静态字段（被final的除外）

putstatic 设置一个静态字段（被final的除外）

invokestatic 调用一个类的静态方法。

2.使用java.lang.reflect包的方法对类进行反射调用，如果一个类没有初始化，需要先进行初始化

3.当初始化一个类时，如果发现其父类没有进行过初始化，则需要先触发其父类的初始化。

当初始化一个接口时，并不要求其父接口都初始化过，只有在真正使用到父类接口的时候才会 初始化。

4虚拟机启动时，执行的主类（包含main\(\)的那个类），虚拟机会先执行初始化这个类。

5.当使用JDK1.7+，对动态语言支持时，如果一个java.lang.invoke.MethodHandle实例最后的解析结果REF\_getstatic,REF\_putStatic,REF\_invoke的方法句柄，并且这个方法句柄所对应的类没有进行过初始化，则需要先触发其初始化。

